import{S as Te,i as Le,s as je,Q as U,e as u,t as x,c as _,a as p,g as D,d as h,b as m,f as w,E as f,k as P,j as Ne,R as qe,n as S,m as Ae,o as ze,T as ae,x as Fe,u as Ce,v as Ye,O as ne,A as Oe,U as te,G as R,F as oe,h as G,V as Q,l as B}from"../chunks/vendor-dad5e567.js";import{a as He,p as ce,g as _e,b as re,l as J,m as ie,f as Me}from"../chunks/todoistService-d3c73e95.js";import{M as Ue,T as Re}from"../chunks/TokenCheck-0c7ab2e5.js";function pe(o,e,s){const t=o.slice();return t[18]=e[s],t}function ve(o,e,s){const t=o.slice();return t[21]=e[s],t}function me(o,e,s){const t=o.slice();return t[18]=e[s],t}function ge(o,e,s){const t=o.slice();return t[21]=e[s],t}function ke(o,e,s){const t=o.slice();return t[18]=e[s],t}function be(o,e,s){const t=o.slice();return t[21]=e[s],t}function Ge(o){let e,s;return{c(){e=u("p"),s=x("Failed to retrieve tasks!")},l(t){e=_(t,"P",{});var l=p(e);s=D(l,"Failed to retrieve tasks!"),l.forEach(h)},m(t,l){w(t,e,l),f(e,s)},p:R,d(t){t&&h(e)}}}function Qe(o){let e,s=o[3],t=[];for(let l=0;l<s.length;l+=1)t[l]=Ee(ke(o,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=B()},l(l){for(let a=0;a<t.length;a+=1)t[a].l(l);e=B()},m(l,a){for(let n=0;n<t.length;n+=1)t[n].m(l,a);w(l,e,a)},p(l,a){if(a[0]&72){s=l[3];let n;for(n=0;n<s.length;n+=1){const g=ke(l,s,n);t[n]?t[n].p(g,a):(t[n]=Ee(g),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=s.length}},d(l){Q(t,l),l&&h(e)}}}function ye(o){let e,s=J[o[21]]+"",t,l;return{c(){e=u("span"),t=x(s),l=x(" LP"),this.h()},l(a){e=_(a,"SPAN",{class:!0});var n=p(e);t=D(n,s),l=D(n," LP"),n.forEach(h),this.h()},h(){m(e,"class","float-right inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2")},m(a,n){w(a,e,n),f(e,t),f(e,l)},p(a,n){n[0]&8&&s!==(s=J[a[21]]+"")&&G(t,s)},d(a){a&&h(e)}}}function Ee(o){let e,s,t,l,a=o[18].content+"",n,g,y,I,E,b=o[18].label_ids,i=[];for(let c=0;c<b.length;c+=1)i[c]=ye(be(o,b,c));function A(){return o[8](o[18])}return{c(){e=u("div"),s=u("div"),t=u("div"),l=P(),n=x(a),g=P();for(let c=0;c<i.length;c+=1)i[c].c();y=P(),this.h()},l(c){e=_(c,"DIV",{class:!0});var d=p(e);s=_(d,"DIV",{class:!0});var r=p(s);t=_(r,"DIV",{class:!0}),p(t).forEach(h),r.forEach(h),l=S(d),n=D(d,a),g=S(d);for(let v=0;v<i.length;v+=1)i[v].l(d);y=S(d),d.forEach(h),this.h()},h(){m(t,"class","radio-button svelte-7jqz9"),m(s,"class","radio-button-container mr-2 svelte-7jqz9"),m(e,"class","task-list-item w-full border-b-2 border-gray-200 px-2 py-3 hover:bg-gray-50 svelte-7jqz9")},m(c,d){w(c,e,d),f(e,s),f(s,t),f(e,l),f(e,n),f(e,g);for(let r=0;r<i.length;r+=1)i[r].m(e,null);f(e,y),I||(E=oe(e,"click",A),I=!0)},p(c,d){if(o=c,d[0]&8&&a!==(a=o[18].content+"")&&G(n,a),d[0]&8){b=o[18].label_ids;let r;for(r=0;r<b.length;r+=1){const v=be(o,b,r);i[r]?i[r].p(v,d):(i[r]=ye(v),i[r].c(),i[r].m(e,y))}for(;r<i.length;r+=1)i[r].d(1);i.length=b.length}},d(c){c&&h(e),Q(i,c),I=!1,E()}}}function Be(o){let e,s,t;return{c(){e=u("div"),s=u("span"),t=x("Loading tasks..."),this.h()},l(l){e=_(l,"DIV",{class:!0});var a=p(e);s=_(a,"SPAN",{class:!0});var n=p(s);t=D(n,"Loading tasks..."),n.forEach(h),a.forEach(h),this.h()},h(){m(s,"class","text-sm text-gray-300"),m(e,"class","w-full p-2 text-center")},m(l,a){w(l,e,a),f(e,s),f(s,t)},p:R,d(l){l&&h(e)}}}function xe(o){let e,s,t;return{c(){e=u("div"),s=u("span"),t=x("You don't have any tasks"),this.h()},l(l){e=_(l,"DIV",{class:!0});var a=p(e);s=_(a,"SPAN",{class:!0});var n=p(s);t=D(n,"You don't have any tasks"),n.forEach(h),a.forEach(h),this.h()},h(){m(s,"class","text-sm text-gray-300"),m(e,"class","w-full p-2 text-center")},m(l,a){w(l,e,a),f(e,s),f(s,t)},d(l){l&&h(e)}}}function Je(o){let e,s;return{c(){e=u("p"),s=x("Failed to retrieve tasks!")},l(t){e=_(t,"P",{});var l=p(e);s=D(l,"Failed to retrieve tasks!"),l.forEach(h)},m(t,l){w(t,e,l),f(e,s)},p:R,d(t){t&&h(e)}}}function Ke(o){let e,s=o[2],t=[];for(let l=0;l<s.length;l+=1)t[l]=we(me(o,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=B()},l(l){for(let a=0;a<t.length;a+=1)t[a].l(l);e=B()},m(l,a){for(let n=0;n<t.length;n+=1)t[n].m(l,a);w(l,e,a)},p(l,a){if(a[0]&68){s=l[2];let n;for(n=0;n<s.length;n+=1){const g=me(l,s,n);t[n]?t[n].p(g,a):(t[n]=we(g),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=s.length}},d(l){Q(t,l),l&&h(e)}}}function De(o){let e,s=J[o[21]]+"",t,l;return{c(){e=u("span"),t=x(s),l=x(" LP"),this.h()},l(a){e=_(a,"SPAN",{class:!0});var n=p(e);t=D(n,s),l=D(n," LP"),n.forEach(h),this.h()},h(){m(e,"class","float-right inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2")},m(a,n){w(a,e,n),f(e,t),f(e,l)},p(a,n){n[0]&4&&s!==(s=J[a[21]]+"")&&G(t,s)},d(a){a&&h(e)}}}function we(o){let e,s,t,l,a=o[18].content+"",n,g,y,I,E,b=o[18].label_ids,i=[];for(let c=0;c<b.length;c+=1)i[c]=De(ge(o,b,c));function A(){return o[9](o[18])}return{c(){e=u("div"),s=u("div"),t=u("div"),l=P(),n=x(a),g=P();for(let c=0;c<i.length;c+=1)i[c].c();y=P(),this.h()},l(c){e=_(c,"DIV",{class:!0});var d=p(e);s=_(d,"DIV",{class:!0});var r=p(s);t=_(r,"DIV",{class:!0}),p(t).forEach(h),r.forEach(h),l=S(d),n=D(d,a),g=S(d);for(let v=0;v<i.length;v+=1)i[v].l(d);y=S(d),d.forEach(h),this.h()},h(){m(t,"class","radio-button svelte-7jqz9"),m(s,"class","radio-button-container mr-2 svelte-7jqz9"),m(e,"class","task-list-item w-full border-b-2 border-gray-200 px-2 py-3 hover:bg-gray-50 svelte-7jqz9")},m(c,d){w(c,e,d),f(e,s),f(s,t),f(e,l),f(e,n),f(e,g);for(let r=0;r<i.length;r+=1)i[r].m(e,null);f(e,y),I||(E=oe(e,"click",A),I=!0)},p(c,d){if(o=c,d[0]&4&&a!==(a=o[18].content+"")&&G(n,a),d[0]&4){b=o[18].label_ids;let r;for(r=0;r<b.length;r+=1){const v=ge(o,b,r);i[r]?i[r].p(v,d):(i[r]=De(v),i[r].c(),i[r].m(e,y))}for(;r<i.length;r+=1)i[r].d(1);i.length=b.length}},d(c){c&&h(e),Q(i,c),I=!1,E()}}}function We(o){let e,s,t;return{c(){e=u("div"),s=u("span"),t=x("Loading tasks..."),this.h()},l(l){e=_(l,"DIV",{class:!0});var a=p(e);s=_(a,"SPAN",{class:!0});var n=p(s);t=D(n,"Loading tasks..."),n.forEach(h),a.forEach(h),this.h()},h(){m(s,"class","text-sm text-gray-300"),m(e,"class","w-full p-2 text-center")},m(l,a){w(l,e,a),f(e,s),f(s,t)},p:R,d(l){l&&h(e)}}}function Ie(o){let e,s,t;return{c(){e=u("div"),s=u("span"),t=x("You don't have any upcoming tasks"),this.h()},l(l){e=_(l,"DIV",{class:!0});var a=p(e);s=_(a,"SPAN",{class:!0});var n=p(s);t=D(n,"You don't have any upcoming tasks"),n.forEach(h),a.forEach(h),this.h()},h(){m(s,"class","text-sm text-gray-300"),m(e,"class","w-full p-2 text-center")},m(l,a){w(l,e,a),f(e,s),f(s,t)},d(l){l&&h(e)}}}function Xe(o){let e,s;return{c(){e=u("p"),s=x("Failed to retrieve tasks!")},l(t){e=_(t,"P",{});var l=p(e);s=D(l,"Failed to retrieve tasks!"),l.forEach(h)},m(t,l){w(t,e,l),f(e,s)},p:R,d(t){t&&h(e)}}}function Ze(o){let e,s=o[1],t=[];for(let l=0;l<s.length;l+=1)t[l]=Pe(pe(o,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=B()},l(l){for(let a=0;a<t.length;a+=1)t[a].l(l);e=B()},m(l,a){for(let n=0;n<t.length;n+=1)t[n].m(l,a);w(l,e,a)},p(l,a){if(a[0]&66){s=l[1];let n;for(n=0;n<s.length;n+=1){const g=pe(l,s,n);t[n]?t[n].p(g,a):(t[n]=Pe(g),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=s.length}},d(l){Q(t,l),l&&h(e)}}}function Ve(o){let e,s=J[o[21]]+"",t,l;return{c(){e=u("span"),t=x(s),l=x(" LP"),this.h()},l(a){e=_(a,"SPAN",{class:!0});var n=p(e);t=D(n,s),l=D(n," LP"),n.forEach(h),this.h()},h(){m(e,"class","float-right inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2")},m(a,n){w(a,e,n),f(e,t),f(e,l)},p(a,n){n[0]&2&&s!==(s=J[a[21]]+"")&&G(t,s)},d(a){a&&h(e)}}}function Pe(o){let e,s,t,l,a=o[18].content+"",n,g,y,I,E,b=o[18].label_ids,i=[];for(let c=0;c<b.length;c+=1)i[c]=Ve(ve(o,b,c));function A(){return o[10](o[18])}return{c(){e=u("div"),s=u("div"),t=u("div"),l=P(),n=x(a),g=P();for(let c=0;c<i.length;c+=1)i[c].c();y=P(),this.h()},l(c){e=_(c,"DIV",{class:!0});var d=p(e);s=_(d,"DIV",{class:!0});var r=p(s);t=_(r,"DIV",{class:!0}),p(t).forEach(h),r.forEach(h),l=S(d),n=D(d,a),g=S(d);for(let v=0;v<i.length;v+=1)i[v].l(d);y=S(d),d.forEach(h),this.h()},h(){m(t,"class","radio-button svelte-7jqz9"),m(s,"class","radio-button-container mr-2 svelte-7jqz9"),m(e,"class","task-list-item w-full border-b-2 border-gray-200 px-2 py-3 hover:bg-gray-50 svelte-7jqz9")},m(c,d){w(c,e,d),f(e,s),f(s,t),f(e,l),f(e,n),f(e,g);for(let r=0;r<i.length;r+=1)i[r].m(e,null);f(e,y),I||(E=oe(e,"click",A),I=!0)},p(c,d){if(o=c,d[0]&2&&a!==(a=o[18].content+"")&&G(n,a),d[0]&2){b=o[18].label_ids;let r;for(r=0;r<b.length;r+=1){const v=ve(o,b,r);i[r]?i[r].p(v,d):(i[r]=Ve(v),i[r].c(),i[r].m(e,y))}for(;r<i.length;r+=1)i[r].d(1);i.length=b.length}},d(c){c&&h(e),Q(i,c),I=!1,E()}}}function $e(o){let e,s,t;return{c(){e=u("div"),s=u("span"),t=x("Loading tasks..."),this.h()},l(l){e=_(l,"DIV",{class:!0});var a=p(e);s=_(a,"SPAN",{class:!0});var n=p(s);t=D(n,"Loading tasks..."),n.forEach(h),a.forEach(h),this.h()},h(){m(s,"class","text-sm text-gray-300"),m(e,"class","w-full p-2 text-center")},m(l,a){w(l,e,a),f(e,s),f(s,t)},p:R,d(l){l&&h(e)}}}function Se(o){let e,s,t;return{c(){e=u("div"),s=u("span"),t=x("You don't have any upcoming tasks"),this.h()},l(l){e=_(l,"DIV",{class:!0});var a=p(e);s=_(a,"SPAN",{class:!0});var n=p(s);t=D(n,"You don't have any upcoming tasks"),n.forEach(h),a.forEach(h),this.h()},h(){m(s,"class","text-sm text-gray-300"),m(e,"class","w-full p-2 text-center")},m(l,a){w(l,e,a),f(e,s),f(s,t)},d(l){l&&h(e)}}}function et(o){let e,s,t,l,a,n,g,y,I,E,b,i,A,c,d,r,v,H,M,k,O,le,se,Y,W,X,K;document.title=e=""+(o[4]+" Lifepoints"),t=new Ue({props:{show:o[5]}});let z={ctx:o,current:null,token:null,hasCatch:!0,pending:Be,then:Qe,catch:Ge,value:17,error:24};U(b=o[0],z);let T=o[3].length==0&&xe(),F={ctx:o,current:null,token:null,hasCatch:!0,pending:We,then:Ke,catch:Je,value:17,error:24};U(H=o[0],F);let L=o[2].length==0&&Ie(),C={ctx:o,current:null,token:null,hasCatch:!0,pending:$e,then:Ze,catch:Xe,value:17,error:24};U(W=o[0],C);let j=o[1].length==0&&Se();return{c(){s=P(),Ne(t.$$.fragment),l=P(),a=u("div"),n=u("h1"),g=x("Today"),y=P(),I=u("div"),E=u("div"),z.block.c(),i=P(),T&&T.c(),A=P(),c=u("h1"),d=x("Overdue"),r=P(),v=u("div"),F.block.c(),M=P(),L&&L.c(),k=P(),O=u("h1"),le=x("Upcoming"),se=P(),Y=u("div"),C.block.c(),X=P(),j&&j.c(),this.h()},l(V){qe('[data-svelte="svelte-1a238no"]',document.head).forEach(h),s=S(V),Ae(t.$$.fragment,V),l=S(V),a=_(V,"DIV",{class:!0});var N=p(a);n=_(N,"H1",{class:!0});var he=p(n);g=D(he,"Today"),he.forEach(h),y=S(N),I=_(N,"DIV",{class:!0});var fe=p(I);E=_(fe,"DIV",{class:!0});var Z=p(E);z.block.l(Z),i=S(Z),T&&T.l(Z),Z.forEach(h),fe.forEach(h),A=S(N),c=_(N,"H1",{class:!0});var de=p(c);d=D(de,"Overdue"),de.forEach(h),r=S(N),v=_(N,"DIV",{class:!0});var $=p(v);F.block.l($),M=S($),L&&L.l($),$.forEach(h),k=S(N),O=_(N,"H1",{class:!0});var ue=p(O);le=D(ue,"Upcoming"),ue.forEach(h),se=S(N),Y=_(N,"DIV",{class:!0});var ee=p(Y);C.block.l(ee),X=S(ee),j&&j.l(ee),ee.forEach(h),N.forEach(h),this.h()},h(){m(n,"class","text-2xl font-bold text-gray-900"),m(E,"class","rounded-lg"),m(I,"class","py-6 mb-6"),m(c,"class","text-2xl font-bold text-gray-900"),m(v,"class","py-6 mb-6"),m(O,"class","text-2xl font-bold text-gray-900"),m(Y,"class","px-4 py-6 sm:px-0"),m(a,"class","max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8")},m(V,q){w(V,s,q),ze(t,V,q),w(V,l,q),w(V,a,q),f(a,n),f(n,g),f(a,y),f(a,I),f(I,E),z.block.m(E,z.anchor=null),z.mount=()=>E,z.anchor=i,f(E,i),T&&T.m(E,null),f(a,A),f(a,c),f(c,d),f(a,r),f(a,v),F.block.m(v,F.anchor=null),F.mount=()=>v,F.anchor=M,f(v,M),L&&L.m(v,null),f(a,k),f(a,O),f(O,le),f(a,se),f(a,Y),C.block.m(Y,C.anchor=null),C.mount=()=>Y,C.anchor=X,f(Y,X),j&&j.m(Y,null),K=!0},p(V,q){o=V,(!K||q[0]&16)&&e!==(e=""+(o[4]+" Lifepoints"))&&(document.title=e);const N={};q[0]&32&&(N.show=o[5]),t.$set(N),z.ctx=o,q[0]&1&&b!==(b=o[0])&&U(b,z)||ae(z,o,q),o[3].length==0?T||(T=xe(),T.c(),T.m(E,null)):T&&(T.d(1),T=null),F.ctx=o,q[0]&1&&H!==(H=o[0])&&U(H,F)||ae(F,o,q),o[2].length==0?L||(L=Ie(),L.c(),L.m(v,null)):L&&(L.d(1),L=null),C.ctx=o,q[0]&1&&W!==(W=o[0])&&U(W,C)||ae(C,o,q),o[1].length==0?j||(j=Se(),j.c(),j.m(Y,null)):j&&(j.d(1),j=null)},i(V){K||(Fe(t.$$.fragment,V),K=!0)},o(V){Ce(t.$$.fragment,V),K=!1},d(V){V&&h(s),Ye(t,V),V&&h(l),V&&h(a),z.block.d(),z.token=null,z=null,T&&T.d(),F.block.d(),F.token=null,F=null,L&&L.d(),C.block.d(),C.token=null,C=null,j&&j.d()}}}function tt(o,e,s){let t,l,a,n,g,y;ne(o,re,k=>s(11,n=k)),ne(o,ce,k=>s(4,g=k)),ne(o,ie,k=>s(5,y=k));const I=()=>{(!n||n=="")&&ie.set(Re)},E=new Date().toISOString().split("T")[0],b=new Date;b.setDate(b.getDate()+1);const i=b.toISOString().split("T")[0];let A=Promise.resolve([]),c=[];async function d(k){try{await He(k),k.done=!0,s(7,c=c.filter(O=>!O.done)),te(ce,g=await _e(),g)}catch{alert("failed to complete task")}}async function r(){if(te(ie,y=null,y),!n){I();return}s(0,A=Me()),A.then(k=>{s(7,c=k)}),te(ce,g=await _e(),g)}Oe(async()=>{let k=localStorage.getItem("authToken");k&&te(re,n=k,n),await r(),re.subscribe(async()=>{await r()})});const v=k=>d(k),H=k=>d(k),M=k=>d(k);return o.$$.update=()=>{o.$$.dirty[0]&128&&s(3,t=c.filter(k=>k.due.date==E)),o.$$.dirty[0]&128&&s(2,l=c.filter(k=>k.due.date!=E&&k.due.date!=i)),o.$$.dirty[0]&128&&s(1,a=c.filter(k=>k.due.date==i))},[A,a,l,t,g,y,d,c,v,H,M]}class nt extends Te{constructor(e){super();Le(this,e,tt,et,je,{},null,[-1,-1])}}export{nt as default};
