import{C as c,P as r}from"./vendor-dad5e567.js";const m=c(0),n=c(""),g=c(null),i="https://api.todoist.com/rest/v1",h="_points",f={2156538858:1,2156538859:2,2156538862:3,2156538864:5,2156538865:8,2156538867:13,2159004476:377},k=async()=>{let s={headers:{Authorization:`Bearer ${r(n)}`}};return await(await fetch(`${i}/tasks?filter=(today%20%7C%20overdue%20%7C%20tomorrow)%20%26%20(%401P%20%7C%20%402P%20%7C%20%403P%20%7C%20%405P%20%7C%20%408P%20%7C%20%4013P%20%7C%20%4021P%20%7C%20%4034P%20%7C%20%4055P%20%7C%20%4089P%20%7C%20%40144P%20%7C%20%40233P%20%7C%20%40377P)`,s)).json()},v=async()=>{var e=await l();let t={headers:{Authorization:`Bearer ${r(n)}`}};const a="%28%401P+%7C+%402P+%7C+%403P+%7C+%405P+%7C+%408P+%7C+%4013P+%7C+%4021P+%7C+%4034P+%7C+%4055P+%7C+%4089P+%7C+%40144P+%7C+%40233P+%7C+%40377P%29+%26+%28%2FRewards%29";return await(await fetch(`${i}/tasks?project_id=${e.id}&filter=${a}`,t)).json()},y=async e=>{let s={Authorization:`Bearer ${r(n)}`},t={method:"POST",headers:s};if(await(await fetch(`${i}/tasks/${e.id}/close`,t)).ok)await P(u(e));else throw new Error("Failed to complete task")},P=async e=>{let s=await C();s+=e;var t=await w();let a={Authorization:`Bearer ${r(n)}`,"Content-Type":"application/json"},o={method:"POST",headers:a,body:JSON.stringify({content:s.toString()})};if(!(await fetch(`${i}/tasks/${t.id}`,o)).ok)throw new Error("Failed to update lifepoints")},C=async()=>{var e=await l();let t={headers:{Authorization:`Bearer ${r(n)}`}},o=await(await fetch(`${i}/tasks?project_id=${e.id}`,t)).json();return parseInt(o[0].content)},w=async()=>{var e=await l();let t={headers:{Authorization:`Bearer ${r(n)}`}};return(await d(`${i}/tasks?project_id=${e.id}`,t))[0]},l=async()=>{let s={headers:{Authorization:`Bearer ${r(n)}`}};var a=(await d(`${i}/projects`,s)).filter(o=>o.name==h)[0];return a},u=e=>f[$(e)],$=e=>e.label_ids.length>0?e.label_ids[0]:null,_=()=>{localStorage.clear()},d=async(e,s)=>{var t="_req_cache_"+e,a=localStorage.getItem(t);if(a)return Promise.resolve(JSON.parse(a));var o=await fetch(e,s);if(o.ok){var p=await o.json();localStorage.setItem(t,JSON.stringify(p))}throw new Error};export{y as a,n as b,_ as c,u as d,v as e,k as f,C as g,P as i,f as l,g as m,m as p};
